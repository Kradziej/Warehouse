<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3c.org/1999/xhtml"
	  xmlns:h="http://java.sun.com/jsf/html"
	  xmlns:p="http://primefaces.org/ui"
	  xmlns:f="http://java.sun.com/jsf/core"
	  xmlns:ui="http://java.sun.com/jsf/facelets">
 
 
 <h:head>
 	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
 	
 	<script src="http://code.jquery.com/jquery-migrate-1.2.1.min.js" type="text/javascript"></script>
 	
 	<script type="text/javascript">
 	
 	function removeItem(e) {
 		
 		$(e.target).closest('li').slideUp('slow');
 	}
 	
 	</script>
 	
 	
 	<style>
 	
 	nav {
		border-bottom: 2px solid #836FF2;
		opacity: 0.8;
		margin-bottom: 50px;
	}
	
	nav a:after	 {
		content: " /";
		color: black;
	}

	nav ul {
		list-style: none outside none;
		margin: 0;
		padding: 0;
		margin-left: 15px;
	}
	
	nav ul li {
		display: inline-block;
	}
	
	nav a {
		font-size: 1.1em;
		text-decoration: none;
	}
 	
 	.logo {
 	}
 	
 	.detail {
 		border-bottom: 1px solid black;
 	}
 	
 	.mode {
 		margin-left: 5px;
 		margin-right: 8px;
 		vertical-align: middle;
 		
 	}
 	
 	.searchQuery {
 		vertical-align: middle;
 		width: 300px;
 	}
 	
 	.submitSearch {
 		vertical-align: middle;
 	}
 	
 	.submitSearch span {
 		padding: 0.16em 1em !important;
 	}
 	
 	label {
 		margin-right: 10px;
 	}
 	
 	.itemRow {
 	
 		width:100%;
 	}
 	
 	.dataRow {
 	
 		width: 100%;
 		table-layout: fixed;
 	}
 	
 	.dataRow td {
 		
 		padding-top: 60px;
 		padding-bottom: 60px;
 		text-align: center;
 		font-weight: bold;
 	}
 	
 	.dataRow td:nth-child(3) {
 		
 		width: 50%;
 	}
 	
 	.dataRow td:nth-child(6) {
 	
 		padding: 0;
 		width: 10px;
 		height: 10px;
 		vertical-align: top;
 	}
 	
 	.dataRow td:nth-child(7) {
 		display: none;
 	}
 	
 
 	.dataRowLabels td {
 		
 		padding: 0;
 	}
 	
 	.dataRowLabels {
 	
 		padding-top: 10px;
 	}
 		
 	
 
 	
 	</style>
 </h:head>



<h:body onload="#{searchView.resetView()}">


    <ui:include src="header.xhtml" />
    
	

	<h:form id="warehouseForm">
	  <p:messages id="messages" showDetail="true" autoUpdate="true" closable="true" />
	  <p:dataScroller id="searchResultScroller" value="#{searchView.items}" var="item" chunkSize="10">
	  
        <f:facet name="header">
        	<p:outputPanel id="search">
				<p:inputText id="searchQuery" styleClass="searchQuery" value="#{searchView.searchQuery}" />
				<p:selectOneMenu id="mode" styleClass="mode" value="#{searchView.searchMode}">
		     		<f:selectItems value="#{searchView.searchModes}" var="mode" itemLabel="#{mode.name}" itemValue="#{mode}"/>
		     	</p:selectOneMenu>
		     	<p:commandButton id="submitSearch" styleClass="submitSearch" value="#{msg.search}" actionListener="#{searchView.search}" update="@form" />
		     	
		     	<h:panelGrid styleClass="dataRow dataRowLabels" columns="5" cellpadding="0">
		     		
		     		<p:commandLink actionListener="#{searchView.sortTable}" update="@form" value="Name"  />
		     		<p:commandLink actionListener="#{searchView.sortTable}" update="@form" value="Price"  />
                    <h:outputText value="Description" />
                    <p:commandLink actionListener="#{searchView.sortTable}" update="@form" value="Amount"  />
                    <p:commandLink actionListener="#{searchView.sortTable}" update="@form" value="Category"  />
 
                </h:panelGrid>
	     	</p:outputPanel>
        </f:facet>
 
         <h:panelGrid columns="2" id="itemRow" styleClass="itemRow" columnClasses="logo,detail" rendered="#{searchView.isSearchResult()}">
            <!--<p:graphicImage name="demo/images/car/#{car.brand}-big.gif" /> -->
 
            <p:outputPanel>
                <h:panelGrid styleClass="dataRow" columns="6" cellpadding="0">
                    
                    <h:outputText value="#{item.name}" />
                    <h:outputText value="#{item.price}" />
                    <h:outputText value="#{item.description}" />
                    <h:outputText value="#{item.amount}" />
                    <h:outputText value="#{item.category}" />
                   	<p:commandLink id="removeItem" action="#{searchView.removeItem()}" process="@this" onsuccess="removeItem(event)" value="x" style="color: red">
                    	  <f:param name="removeItemId" value="#{item.id}" />
                    </p:commandLink>
                </h:panelGrid>
            </p:outputPanel>
          </h:panelGrid>
   	   </p:dataScroller>
   	   
	</h:form>

</h:body>


</html>